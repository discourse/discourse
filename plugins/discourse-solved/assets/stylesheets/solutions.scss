@use "sass:math";

$solved-color: var(--success);

.select-kit {
  &.solved-status-filter {
    min-width: auto;
    margin-right: 0.5em;

    .select-kit-header {
      color: var(--primary-high);
    }
  }
}

.fa.accepted {
  color: $solved-color;
}

.post-controls .extra-buttons {
  // anon text
  .accepted-text {
    white-space: nowrap;

    .d-icon,
    .accepted-label {
      color: $solved-color;
    }
  }

  // logged in button
  .accepted {
    .d-icon,
    .d-button-label {
      color: $solved-color;
    }
  }
}

.post-controls span.accepted-text {
  display: inline-flex;
  align-items: center;
  gap: 0.25em;
  padding: 0 0.5rem;
  font-size: var(--font-up-1);
  height: 100%;
}

.mobile-view .solved-panel {
  margin-bottom: 15px;
}

.solved-panel {
  .by {
    display: none;
  }
  margin-top: 20px;
  margin-bottom: 0;
  font-size: 13px;
}

aside.quote.accepted-answer {
  > .title {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
  }

  &.accepted-answer--has-excerpt > .title {
    cursor: pointer;
  }

  &:not(.accepted-answer--has-excerpt) {
    > .title {
      padding: 0.8em;
    }

    > blockquote {
      display: none;
    }
  }

  .accepted-answer--solver-accepter {
    display: flex;
    flex-wrap: wrap;
    flex: 1;
    min-width: 0;
    gap: 0.25em;
  }

  .accepted-answer--solver {
    margin-right: auto;
  }

  .accepted-answer--accepter {
    font-size: var(--font-down-1);
    width: 100%;
    flex-basis: auto;
    margin-top: auto;
    margin-bottom: auto;
    margin-right: 0.25em;

    @media (width >= 480px) {
      width: auto;
    }
  }
}

.user-card-metadata-outlet.accepted-answers {
  display: inline-block;
}

.post-action-menu__solved-accepted-tooltip-content
  .fk-d-tooltip__inner-content {
  display: block;
}

.topic-statuses .topic-status.--solved {
  .d-icon {
    color: $solved-color;
  }
}

aside.quote.accepted-answer[data-expanded="false"] {
  > blockquote {
    position: relative;
    max-height: 20em;
    overflow: hidden;

    &::after {
      content: "";
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 3em;
      background: linear-gradient(transparent, var(--secondary));
      pointer-events: none;
    }
  }
}

.solved-confetti {
  position: fixed;
  top: 200px;
  right: 200px;
  width: 0;
  height: 0;
  z-index: z("header") + 1;
  overflow: visible;
  pointer-events: none;
}

.solved-confetti-particle {
  position: absolute;
  width: 8px;
  height: 8px;
  border-radius: 2px;
  animation: solved-confetti-burst 1.5s ease-out forwards;

  @for $i from 1 through 50 {
    &:nth-child(#{$i}) {
      --angle: #{math.random(360)}deg;
      --distance: #{80 + math.random(150)}px;
      --rotation: #{math.random(720) - 360}deg;
      --delay: #{math.random(250) * 0.001}s;
      --color: #{hsl(math.random(360), 80%, 60%)};
      background-color: var(--color);
      animation-delay: var(--delay);
    }
  }
}

@keyframes solved-confetti-burst {
  0% {
    transform: translate(-50%, -50%) rotate(0deg);
    opacity: 1;
  }

  100% {
    transform: translate(
        calc(-50% + cos(var(--angle)) * var(--distance)),
        calc(-50% + sin(var(--angle)) * var(--distance) + 50px)
      )
      rotate(var(--rotation));
    opacity: 0;
  }
}
