/**
  This CSS file is loaded dynamically when loadDevTools() is run in the console.
  It is not part of our normal CSS build process, so SCSS variables are not available.
  Native CSS nesting can be used safely, because developers who use this tool are expected to have modern browsers.
*/

/* Plugin Outlet Debug - green tones (distinct from block outlets which use amber/orange) */
.plugin-outlet-debug {
  position: relative;
  border: 1px dashed #16a34a;
  margin: 2px;
  background: rgb(22, 163, 74, 0.05);

  /* Wrapper outlets are compact inline markers */
  &.--wrapper {
    border: none;
    background: none;

    .plugin-outlet-debug__badge {
      position: static;
      background: #2563eb;
      border-radius: 4px;

      &:hover {
        background: #1d4ed8;
      }
    }
  }
}

.plugin-outlet-debug__badge {
  position: absolute;
  top: -1px;
  left: -1px;
  z-index: 1000;
  display: inline-flex;
  align-items: center;
  gap: 4px;
  background: #16a34a;
  color: white !important;
  padding: 2px 5px !important;
  font-size: 0.75rem !important;
  font-weight: bold;
  border-radius: 0 0 4px 0;
  cursor: pointer;
  text-shadow: 1px 1px 2px rgb(0, 0, 0, 0.5);

  .d-icon {
    color: white !important;
    font-size: 0.75rem !important;
    font-weight: bold;
    width: 0.75rem !important;
    filter: drop-shadow(1px 1px 2px rgb(0, 0, 0, 0.5));
  }

  &:hover {
    background: #15803d;
  }
}

.plugin-outlet-info__wrapper {
  display: flex;
  flex-direction: column;
}

.plugin-outlet-info__heading {
  font-size: 14px;
  font-weight: bold;
  margin-bottom: 10px;
  display: flex;
  gap: 5px;

  .title {
    flex-grow: 1;
  }

  .github-link {
    color: var(--primary-medium);
  }
}

.plugin-outlet-info__content {
  display: grid;
  grid-template-columns: min-content 1fr;
  font-size: 14px;
  gap: 10px;
  min-width: 300px;
  max-width: 100%;
  width: 100%;
  overflow: hidden;

  & > div {
    min-width: 0;
  }

  .fw {
    font-family: "Courier New", Courier, "Lucida Console", Monaco, monospace;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    background: var(--primary-very-low);
  }

  .value {
    display: flex;
    gap: 5px;
  }

  .no-arguments {
    grid-column: span 2;
  }

  a {
    color: var(--primary-medium);
  }
}

.dev-tools-toolbar {
  position: fixed;
  z-index: 999999;
  display: flex;
  flex-direction: column;
  background-color: var(--primary-200);
  border-radius: 0 5px 5px 0;
  box-shadow: 1px 1px 2px rgb(0, 0, 0, 0.25);
  opacity: 0.8;
  transition: opacity 0.2s ease-in-out;

  &.--dragging {
    opacity: 0.5;
  }

  button {
    background: none;
    border: none;
    padding: 5px;
    color: var(--primary-700);

    .d-icon {
      color: inherit !important;
    }

    &:hover:not(.gripper) {
      background-color: var(--primary-50);
    }

    &.gripper {
      cursor: grab;
      padding-block: 0;
      border-bottom: 1px dotted var(--primary-low-mid);
      color: var(--primary-500);
    }

    &.--active {
      background-color: var(--primary-100);
      color: var(--tertiary);

      .d-icon {
        font-weight: bold;
      }
    }
  }
}

/* Block Debug Overlay - warm amber/orange tones (distinct from plugin outlets which use green/blue) */
.block-debug-info {
  position: relative;
  border: 1px dotted #d97706;
  margin: 2px;
  background: rgb(217, 119, 6, 0.05);

  &.--rendered {
    border-color: #d97706;
  }
}

.block-debug-badge {
  position: absolute;
  top: -1px;
  left: -1px;
  z-index: 1000;
  display: inline-flex;
  align-items: center;
  gap: 4px;
  background: #d97706;
  color: white !important;
  padding: 2px 5px !important;
  font-size: 0.75rem !important;
  font-weight: bold;
  border-radius: 0 0 4px 0;
  cursor: pointer;
  text-shadow: 1px 1px 2px rgb(0, 0, 0, 0.5);

  .d-icon {
    color: white !important;
    font-size: 0.75rem !important;
    font-weight: bold;
    width: 0.75rem !important;
    filter: drop-shadow(1px 1px 2px rgb(0, 0, 0, 0.5));
  }

  &:hover {
    background: #b45309;
  }
}

/* Ghost blocks - red for hidden/failed conditions */
.block-debug-ghost {
  position: relative;
  border: 1px dashed #dc2626;
  background: repeating-linear-gradient(
    45deg,
    transparent,
    transparent 10px,
    rgb(220, 38, 38, 0.05) 10px,
    rgb(220, 38, 38, 0.05) 20px
  );
  padding: 8px;
  margin: 2px;
  min-height: 30px;
}

.block-debug-ghost__badge {
  position: absolute;
  top: -1px;
  left: -1px;
  z-index: 1000;
  display: inline-flex;
  align-items: center;
  gap: 4px;
  background: #dc2626;
  color: white !important;
  padding: 2px 5px !important;
  font-size: 0.75rem !important;
  font-weight: bold;
  border-radius: 0 0 4px 0;
  cursor: pointer;
  text-shadow: 1px 1px 2px rgb(0, 0, 0, 0.5);

  .d-icon {
    color: white !important;
    font-size: 0.75rem !important;
    font-weight: bold;
    width: 0.75rem !important;
    filter: drop-shadow(1px 1px 2px rgb(0, 0, 0, 0.5));
  }

  &:hover {
    background: #b91c1c;
  }
}

/* Block Outlet boundaries - yellow/gold */
.block-outlet-debug {
  position: relative;
  border: 1px dashed #f59e0b;
  margin: 2px;
  padding: 4px;
  min-height: 20px;
  background: rgb(245, 158, 11, 0.05);
}

.block-outlet-debug__badge {
  position: absolute;
  top: -1px;
  left: -1px;
  display: inline-flex;
  align-items: center;
  gap: 4px;
  background: #f59e0b;
  color: white !important;
  padding: 2px 5px !important;
  font-size: 0.75rem !important;
  font-weight: bold;
  border-radius: 0 0 4px 0;
  text-shadow: 1px 1px 2px rgb(0, 0, 0, 0.5);

  .d-icon {
    color: white !important;
    font-size: 0.75rem !important;
    font-weight: bold;
    width: 0.75rem !important;
    filter: drop-shadow(1px 1px 2px rgb(0, 0, 0, 0.5));
  }
}

/* Block Debug Tooltip */
.block-debug-tooltip {
  display: flex;
  flex-direction: column;
  gap: 12px;
  font-size: 13px;
  min-width: 280px;
  max-width: 450px;

  &.--ghost {
    .block-debug-tooltip__header {
      color: #f44336;
    }
  }
}

.block-debug-tooltip__header {
  display: flex;
  align-items: center;
  gap: 6px;
  font-weight: bold;
  color: #d97706;

  &.--failed {
    color: #dc2626;
  }

  .d-icon {
    font-size: 0.75rem !important;
  }
}

.block-debug-tooltip__title {
  font-size: 14px;
}

.block-debug-tooltip__outlet {
  font-weight: normal;
  font-size: 11px;
  opacity: 0.7;
}

.block-debug-tooltip__status {
  font-size: 10px;
  padding: 1px 4px;
  background: #dc2626;
  color: white;
  border-radius: 2px;
}

.block-debug-tooltip__section {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.block-debug-tooltip__section-title {
  font-size: 11px;
  font-weight: bold;
  text-transform: uppercase;
  opacity: 0.6;
}

.block-debug-tooltip__empty {
  font-style: italic;
  opacity: 0.6;
}

.block-debug-tooltip__hint {
  font-size: 11px;
  font-style: italic;
  opacity: 0.7;
  border-top: 1px solid var(--primary-low);
  padding-top: 8px;
}

/* Block Debug Args Table */
.block-debug-args {
  display: flex;
  flex-direction: column;
  gap: 4px;

  &.--empty {
    font-style: italic;
    opacity: 0.6;
  }
}

.block-debug-args__row {
  display: flex;
  gap: 8px;
  padding: 2px 4px;
  border-radius: 2px;
  cursor: pointer;
  background: none;
  border: none;
  width: 100%;
  text-align: left;
  font: inherit;
  color: inherit;

  &:hover {
    background: var(--primary-very-low);
  }
}

.block-debug-args__key {
  font-weight: bold;
  color: #2196f3;
  white-space: nowrap;
}

.block-debug-args__value {
  font-family: "Courier New", monospace;
  font-size: 12px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  flex: 1;
}

.block-debug-args__type {
  font-size: 10px;
  opacity: 0.5;
  margin-right: 4px;
}

/* Block Debug Conditions Tree */
.block-debug-conditions {
  display: flex;
  flex-direction: column;
  gap: 2px;
  font-family: "Courier New", monospace;
  font-size: 12px;

  &.--passed {
    .block-debug-condition__type {
      color: #d97706;
    }
  }

  &.--failed {
    .block-debug-condition__type {
      color: #dc2626;
    }
  }
}

.block-debug-condition {
  display: flex;
  align-items: center;
  gap: 4px;

  &.--combinator {
    .block-debug-condition__type {
      font-weight: bold;
    }
  }
}

.block-debug-condition__type {
  &.--combinator {
    color: #607d8b;
  }
}

.block-debug-condition__args {
  opacity: 0.7;
  font-size: 11px;
}

/* Block Debug Menu (for dropdown button) */
.block-debug-menu {
  display: flex;
  flex-direction: column;
  gap: 8px;
  padding: 8px;
  min-width: 160px;

  label {
    display: flex;
    align-items: center;
    gap: 8px;
    cursor: pointer;
    font-size: 13px;

    &:hover {
      color: var(--primary);
    }

    input[type="checkbox"] {
      margin: 0;
    }
  }
}
